---
copyright:
  years: 2016,2018
lastupdated: "2018-06-13"
---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}
{:tip: .tip}

# 架構 
{: #architecture}

## 抄寫

{{site.data.keyword.composeForRabbitMQ_full}} 服務包含三個一致地充當高可用性分配管理系統的節點，每一個節點都執行 RabbitMQ 應用程式，並共用使用者、虛擬主機、佇列、交換、連結及運行環境參數。當您選取部署服務的地區時，三個節點會分散在地區的可用性區域，然後 RabbitMQ 分配管理系統作業所需的所有資料和狀態會在所有節點之間抄寫。 

一個節點會充當主要節點，而其他節點則充當鏡映。鏡映會將主要節點發生的作業，用與主要節點完全相同的順序套用，因此維持相同的狀態。發佈動作以外的所有動作都只會針對主要節點，然後主要節點再將動作的效果播送給鏡映。如果主要節點失敗，則其中一個鏡映會提升，RabbitMQ 分配管理系統也會正常運作。

## 磁碟加密

所有 {{site.data.keyword.composeForRabbitMQ}} 服務都有靜態加密。您的資料位於已啟用磁區層次加密的伺服器上。 

由於 {{site.data.keyword.composeForRabbitMQ}} 是一項受管理的服務，因此 {{site.data.keyword.cloud}} Compose 操作員能夠看到資料。除了磁碟加密外，我們建議您，如果要透過傳訊佇列傳遞個人資訊，請先將資訊加密再傳送它，或使用延伸或特性對 RabbitMQ 本身啟用加密。這些方法固然可能影響可用性或效能，確定個人資訊受到加密保護仍是個很好的作法。


## 自動調整

資源會根據 RabbitMQ 分配管理系統的記憶體總用量而自動調整。儲存空間是以 1:1 的佈建 RAM 比例為基礎。這些資源組合成為單位。

自動調整的設計是要回應資料庫的中短期趨勢。每分鐘都會檢查您的服務，如果它的 RAM 不足，便會將更多的單位配置給該部署。 

自動調整對於磁碟/記憶體用量收縮的部署，不會將其縮減。針對您的資料庫佈建的資源會保留以供您未來需要，或是直到您手動縮減部署為止。
{: .tip}
